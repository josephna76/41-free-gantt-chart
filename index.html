<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Gantt Chart Tool</title>
    <link
      rel="stylesheet"
      href="https://frappe.io/frappe-gantt/frappe-gantt.css"
    />
    <script src="https://frappe.io/frappe-gantt/frappe-gantt.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      #gantt {
        width: 100%;
        height: 60vh;
      }
      .input-field {
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="input-field">
      <textarea
        id="taskInput"
        rows="10"
        cols="50"
        placeholder="Paste task details here..."
      ></textarea>
    </div>
    <button onclick="generateGanttChart()">Generate Gantt Chart</button>

    <div id="gantt"></div>

    <script>
      // Function to generate the Gantt chart
      function generateGanttChart() {
        const input = document.getElementById("taskInput").value;
        const tasks = parseTasks(input);
        const gantt = new Gantt("#gantt", tasks);
      }

      // Parses the input text to a format suitable for frappe-gantt
      function parseTasks(input) {
        const lines = input.split("\n");
        const tasks = [];

        lines.forEach((line) => {
          // Check for tab-separated values first, fall back to comma-separated
          const delimiter = line.includes("\t") ? "\t" : ",";
          const parts = line.split(delimiter);
          if (parts.length >= 5) {
            const [id, name, startDate, endDate, dependencies] = parts.map(
              (part) => part.trim()
            ); // Trim each part to remove extra whitespace
            tasks.push({
              id,
              name,
              start: startDate,
              end: endDate,
              dependencies: dependencies
                ? dependencies.split(" ").filter(Boolean)
                : [], // Handle multiple dependencies, if present
            });
          }
        });

        return tasks;
      }
    </script>
  </body>
</html>
